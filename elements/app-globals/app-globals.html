<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="globals-behavior.html">

<dom-module id="app-globals">
  <template>
    <iron-localstorage name="app-data"
      value="{{data}}"
      on-iron-localstorage-load-empty="initializeAppData"
    ></iron-localstorage>

    <iron-localstorage name="arrival-globals"
      value="{{globals}}"
      on-iron-localstorage-load-empty="initializeGlobals"
    ></iron-localstorage>
    <iron-localstorage name="arrival-babyname"
      value="{{globals.babyname}}"
    ></iron-localstorage>
    <iron-localstorage name="arrival-gender"
      value="{{globals.gender}}"
    ></iron-localstorage>
    <iron-localstorage name="arrival-birthdate"
      value="{{globals.birthdate}}"
    ></iron-localstorage>

    <iron-localstorage name="arrival-max-reached"
      value="{{globals.maxReached}}"
      type="number"
    ></iron-localstorage>
    <iron-localstorage name="arrival-max-overdue"
      value="{{globals.maxOverdue}}"
      type="number"
    ></iron-localstorage>
    <iron-localstorage name="arrival-max-coming"
      value="{{globals.maxComing}}"
      type="number"
    ></iron-localstorage>
  </template>
</dom-module>

<script>
(function() {
  Polymer({
    is: 'app-globals',
    behaviors: [GlobalsBehaviour],  // jshint ignore:line

    properties: {
      // transient data

      // persistent data

      data: {
        type: Object,
        notify:true
      },

    },

    initializeGlobals: function() {
      this.globals = {
        babyname: '',
        gender: '',
        maxReached: 5,
        maxOverdue: 5,
        maxComing: 5,
        birthdate: new Date().getFullYear()+'-'+new Date().getMonth()+'-'+new Date().getDate(),
      };
    },

    initializeAppData: function() {
      this.data = {
        baby: {
          name: '',
          birthdate: new Date().getFullYear()+'-'+new Date().getMonth()+'-'+new Date().getDate(),
        }
      };
    },

  });
})();
</script>
